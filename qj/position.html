<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link rel="stylesheet" href="../css/index.css" />
		<style type="text/css">
			.el-row {
    margin-bottom: 20px;
    &:last-child {
      margin-bottom: 0;
    }
  }
  .el-col {
    border-radius: 4px;
  }
  .bg-purple-dark {
    background: #99a9bf;
  }
  .bg-purple {
    background: #d3dce6;
  }
  .bg-purple-light {
    background: #e5e9f2;
  }
  .grid-content {
    border-radius: 4px;
    min-height: 36px;
  }
  .row-bg {
    padding: 10px 0;
    background-color: #f9fafc;
  }
  #biao{
  	font-size: 30px;
  	color: red;
  	font-weight: bold;
  }
	</style>
	</head>
	<body>
		<div id="ban">
			<el-row>
				<el-col :span="4" :offset="2">
					<span id="biao">职位定义</span>
				</el-col>
				<el-col :span="2" :offset="16">
					 <el-button  plain>关闭</el-button>
				</el-col>
			</el-row>
			<el-row>
  				<el-col :span="4" :offset="4">
  					<div>
  						<el-input :disabled="true" placeholder="职位编码"></el-input>
  					</div>
  				</el-col>
  				<el-col :span="4" :offset="2">
  					<div>
  						<el-input v-model="position.positionnam"  placeholder="请输入职位名称"></el-input>
  					</div>
  				</el-col>
  				<el-col :span="8" :offset="2">
  					<div>
  						 <el-button type="primary" plain @click="addPosition">增加</el-button>
  						 <el-button type="primary" plain>删除</el-button>
  						 <el-button type="primary" plain>保存</el-button>
  					</div>
  				</el-col>
			</el-row>
			<el-table ref="singleTable" :data="positionData" highlight-current-row @current-change="handleCurrentChange" style="width: 60%;margin-left: 250px;">
				<el-table-column property="positionid" label="职位编码" width="450">
				</el-table-column>
				<el-table-column property="positionname" label="职位名称" width="450">
				</el-table-column>
			</el-table>
		</div>
	</body>
	<script type="text/javascript" src="../js/jquery-1.12.4.js" ></script>
	<script type="text/javascript" src="../js/vue.js"></script>
	<script type="text/javascript" src="../js/axios.min.js"></script>
	<script type="text/javascript" src="../js/axios_cfg.js"></script>
	<script type="text/javascript" src="../js/index.js"></script>
	<script>
		var ban = new Vue({
			el:"#ban",
			data:{
					positionData: [{
					
        			}],
        			currentRow: null,
        			position:{
        				positionnam:""
        			},
				},
			mounted() {
				this.load();
			},
			methods:{
				handleCurrentChange(val) {
       				 this.currentRow = val;
      			},
      			load(){
      				let _this = this;
					axios.get("http://127.0.0.1:8080/DZWWeb/qj/api/QjPositionAction").then(function(resp) {
						_this.positionData = resp.data;
					}).catch(function(e) {
						console.info(e);
					});
      			},
      			addPosition(){
      				let _this = this;
      				var position={
      					"positionname":this.position.positionnam,
      				};
      				$.ajax("http://127.0.0.1:8080/DZWWeb/qj/api/QjPositionAction",{
      					type:"post",
      					dataType:"json",
      					contentType:"application/json",
      					data:JSON.stringify(position),
      					success:function(data){
      						//alert(JSON.stringify(data));
      						_this.$message('新增成功');
      					}
      				});
      				this.load();
      				//this.$message('这是一条消息提示');
//    				axios.post("http://127.0.0.1:8080/DZWWeb/qj/api/QjPositionAction",this.position).then(function(resp){
//						if(resp.data.code=="200"){
//							showAlertDialog('新增成功');
//							closeWindowDialog();
//							//personListVm.goToPage(1,3);
//							//this.load();
//						}
//					}).catch(function(e){
//						console.log(e);
//					});
      			},
      			
			}
		})
	</script>
</html>
