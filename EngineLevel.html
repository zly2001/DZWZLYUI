<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>技工星级</title>
		<link rel="stylesheet" type="text/css" href="css/index.css" />
	</head>
	<style type="text/css">
		.el-table .warning-row {
			background: oldlace;
		}
		
		.el-table .success-row {
			background: #f0f9eb;
		}
	</style>

	<body>

		<script src="//unpkg.com/vue/dist/vue.js"></script>
		<script src="//unpkg.com/element-ui@2.14.1/lib/index.js"></script>
		<div id="app">
			<el-input placeholder="请输入内容" v-model="input" clearable>
			</el-input>

			<el-row>
				<el-button icon="el-icon-search" circle></el-button>
				<el-button type="success" @click="dialogVisible = true">新增用户资料资料</el-button>

				<el-dialog title="提示" :visible.sync="dialogVisible" width="60%" :before-close="handleClose" @opened="handelOpen" :destroy-on-close="true" :fullscreen="false">
					<div id="cnt">
						<span>正在新增技工信息</span>
					</div>
					<span slot="footer" class="dialog-footer">
				    <el-button @click="dialogVisible = false">取 消</el-button>
				    <el-button type="primary" @click="dialogVisible = false">确 定</el-button>
 				 </span>
				</el-dialog>
				<el-button type="info" icon="el-icon-message" circle></el-button>
			</el-row>

			<template>
				<el-table :data="tableData" style="width: 45%" :row-class-name="tableRowClassName">
					<el-table-column prop="sid" label="星级编号" width="180">
					</el-table-column>
					<el-table-column prop="starts" label="星级名称" width="180">
					</el-table-column>
					<el-table-column prop="type" label="等级" width="180">
					</el-table-column>
					<el-table-column prop="xmoney" label="提成权重">
					</el-table-column>
					<el-table-column fixed="right" label="操作" width="120">
						<template slot-scope="scope">
							<el-button @click="delect(scope.row.sid)" type="text" size="small">
								移除
							</el-button>
						</template>
					</el-table-column>
				</el-table>
			</template>
		</div>

	</body>
	<script type="text/javascript" src="js/jquery-1.12.4.js"></script>
	<script type="text/javascript" src="js/vue.js"></script>
	<script type="text/javascript" src="js/axios.min.js"></script>
	<script type="text/javascript" src="js/axios_cfg.js"></script>
	<script type="text/javascript" src="js/index.js"></script>
	<script>
		var Main = {
			data:{
				dialogVisible: false,
				JiGong:{
					sid:"",
					stars:"",
					xmoney:"",
					type:""
					
					
				}
			}
			methods: {
				tableRowClassName({
						row,
						rowIndex
					}) {
						if (rowIndex === 1) {
							return 'warning-row';
						} else if (rowIndex === 3) {
							return 'success-row';
						}
						return '';
					},
					delect(sid) {
						//alert(sid)
						let _this = this;
						axios.get(`http://127.0.0.1:8080/DZWWeb/ljy/api/LjyAction/delect/${sid}`).then(function(resp) {
							//测试是否查到数据
							//alert(resp);
							this.select();
						});
						this.$message({
							message: '删除成功！',
							type: 'success'
						});
					},
					select() {
						let _this = this;
						axios.get(`http://127.0.0.1:8080/DZWWeb/ljy/api/LjyAction/SelectAll`).then(function(resp) {
							//测试是否查到数据
							//alert(resp);
							_this.tableData = resp.data;
						});
					},
					handelOpen() {
					$("#cnt").load("addJiGongMessage.html");
				}
			},
			mounted() {
				this.select();
			},
			data() {
				return {
					tableData: []
				}
			}
		}
		var Ctor = Vue.extend(Main)
		new Ctor().$mount('#app')
	</script>

</html>