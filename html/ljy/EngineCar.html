<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		

	</head>

	<body>
		<!--<script src="//unpkg.com/vue/dist/vue.js"></script>-->
		<!--<script src="//unpkg.com/element-ui@2.14.1/lib/index.js"></script>-->
		<div id="app">
			<!--<el-input v-model="input" placeholder="请输入内容"></el-input>
			<el-input v-model="input" placeholder="请输入内容"></el-input>
			<el-input v-model="input" placeholder="请输入内容"></el-input>
			<el-input v-model="input" placeholder="请输入内容"></el-input>-->
			<!--<el-button type="primary" icon="el-icon-edit">修改</el-button>-->
			<el-button type="primary" icon="el-icon-share" @click="dialogVisible = true" id="cnt">增加</el-button>
			<!--<el-button type="primary" icon="el-icon-delete">删除</el-button>-->
			<!--<el-button type="primary" icon="el-icon-search">搜索</el-button>-->
			<template>
				<el-table :data="tableData" stripe style="width: 100%">
					<el-table-column prop="wid" label="车辆id" width="180">
					</el-table-column>
					<el-table-column prop="caid" label="车牌" width="180">
					</el-table-column>
					<el-table-column prop="cbrand" label="汽车品牌" width="180">
					</el-table-column>
					<el-table-column prop="mglj" label="每公里价" width="180">
					</el-table-column>
					<el-table-column fixed="right" label="操作">
						<template slot-scope="scope">
							<el-button @click="delect(scope.row.wid)" type="text" size="small">
								移除
							</el-button>
							<el-button type="text" size="small">
								修改
							</el-button>
						</template>
					</el-table-column>

				</el-table>
			</template>
			<el-dialog title="提示" :visible.sync="dialogVisible" width="60%" :before-close="handleClose">
				<el-form :model="addJGLevel" status-icon :rules="rules" ref="addJGLevel" label-width="100px" class="demo-ruleForm">
					<el-form-item label="车牌" prop="caid">
						<el-input v-model="addJGLevel.caid" autocomplete="off"></el-input>
					</el-form-item>
					<el-form-item label="汽车品牌" prop="cbrand">
						<el-input v-model.number="addJGLevel.cbrand"></el-input>
					</el-form-item>
					<el-form-item label="每公里价格" prop="mglj">
						<el-input v-model.number="addJGLevel.mglj"></el-input>
					</el-form-item>
					<el-form-item label="起步价" prop="czt">
						<el-input v-model.number="addJGLevel.czt"></el-input>
					</el-form-item>
					<el-form-item label="超出公里价" prop="ccglj">
						<el-input v-model.number="addJGLevel.ccglj"></el-input>
					</el-form-item>
					<el-form-item>
						<el-button type="primary" @click="ensure()">提交</el-button>
						<el-button @click="resetForm()">重置</el-button>
					</el-form-item>
				</el-form>
				<span slot="footer" class="dialog-footer">
    				<el-button @click="dialogVisible = false">取 消</el-button>
    				<el-button type="primary" @click="dialogVisible = false">确 定</el-button>
  				</span>
			</el-dialog>
		</div>
	</body>
	
	<script>
		var app = new Vue({
				el: "#app",
				data: {
					dialogVisible: false,
					waiqin: {
						wid: "",
						caid: "",
						cbrand: "",
						mglj: ""
					},
					addJGLevel: {
						caid: "",
						cbrand: "",
						mglj: "",
						czt: "",
						ccglj: "",
						statusid: "13"
					},
					//关于输入权限
					rules: {},
					input: "",
					tableData: []
				},
				mounted() {
					this.select();
				},
				methods: {
					delect(wid) {
							//alert(sid)
							let _this = this;
							axios.get(`http://127.0.0.1:8080/DZWWeb/ljy/api/waiqinAction/delect/${wid}`).then(function(resp) {
								//测试是否查到数据
								//alert(resp);
								this.select();
							});
							this.$message({
								message: '删除成功！',
								type: 'success'
							});
							_this.select();
						},
						select() {
							let _this = this;
							axios.get(`http://127.0.0.1:8080/DZWWeb/ljy/api/waiqinAction/select`).then(function(resp) {
								//alert(resp);
								_this.tableData = resp.data;
								console.log(_this.tableData);
							});
						},
						handelOpen() {
							$("#cnt").load("waiqinxinzen.html");
						},
						handleClose(done) {
							this.$confirm('确认关闭？')
								.then(_ => {
									done();
								})
								.catch(_ => {});
						},
						ensure() {
							let _this = this;
							axios.post(`http://127.0.0.1:8080/DZWWeb/ljy/api/waiqinAction/insertSelective`, this.addJGLevel).then(resp => {
								if (resp.data.code == "200") {
									this.$message({
										message: "新增外勤车辆成功",
										type: 'success'
									});
									_this.select();
								}
							})
						},
						resetForm(formName) {
							this.$refs[formName].resetFields();
						}
				}
			})
			//		var Ctor = Vue.extend(Main)
			//		new Ctor().$mount('#app')
	</script>

</html>