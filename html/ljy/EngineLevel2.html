<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		
	</head>

	<body>

		<div id="app">
			<el-input placeholder="请输入内容" v-model="input" clearable>
			</el-input>

			<el-row>
				<el-button icon="el-icon-search" circle></el-button>
				<el-button type="success" @click="dialogVisible = true">新增用户资料资料</el-button>

				<el-dialog title="提示" :visible.sync="dialogVisible" width="60%" :before-close="handleClose" :destroy-on-close="true" :fullscreen="false">
					<el-form :model="addJGLevel" status-icon :rules="rules" ref="addJGLevel" label-width="100px" class="demo-ruleForm">						
						<el-form-item label="星级名称" prop="starts">
							<el-input v-model="addJGLevel.starts" autocomplete="off"></el-input>
						</el-form-item>
						<el-form-item label="等级" prop="xmoney">
							<el-input v-model.number="addJGLevel.xmoney"></el-input>
						</el-form-item>						
						<el-form-item>
							<el-button type="primary" @click="ensure()">提交</el-button>
							<el-button @click="resetForm()">重置</el-button>
						</el-form-item>
					</el-form>
					<span slot="footer" class="dialog-footer">
				    <el-button @click="dialogVisible = false">取 消</el-button>
				    <el-button type="primary" @click="dialogVisible = false">确 定</el-button>
 				 </span>
				</el-dialog>
				<el-button type="info" icon="el-icon-message" circle></el-button>
			</el-row>
			<el-row>
				<!--<template>
					<el-table :data="tableData" stripe style="width: 100%; height=250;">
						<el-table-column type="sid" label="星级编号">
						</el-table-column>
						<el-table-column prop="starts" label="星级名称">
						</el-table-column>
						<el-table-column prop="type" label="等级">
						</el-table-column>
						<el-table-column prop="xmoney" label="提成权重">
						</el-table-column>																	
						<el-table-column fixed="right" label="操作">
							<template slot-scope="scope">
								<el-button @click="delect(scope.row.sid)" type="text" size="small">
									移除
								</el-button>
								<el-button @click="update(scope.row.sid)" type="text" size="small">
								修改
							</el-button>
							</template>
						</el-table-column>
					</el-table>
				</template>-->
			</el-row>
			<template>
				<el-table :data="tableData" style="width: 45%;height=250;">
					<el-table-column prop="sid" label="星级编号">
					</el-table-column>
					<el-table-column prop="starts" label="星级名称">
					</el-table-column>
					<el-table-column prop="type" label="等级">
					</el-table-column>
					<el-table-column prop="xmoney" label="提成权重">
					</el-table-column>
					<el-table-column fixed="right" label="操作">
						<template slot-scope="scope">
							<el-button @click="delect(scope.row.sid)" type="text" size="small">
								移除
							</el-button>
							<el-button @click="update(scope.row.sid)" type="text" size="small">
								修改
							</el-button>
						</template>
					</el-table-column>
				</el-table>
			</template>
		</div>
	</body>

	<script>
		var app = new Vue({
			el: "#app",
			data: {
				dialogVisible: false,
				JiGong: {
					sid: "",
					stars: "",
					xmoney: "",
					type: ""
				},
				addJGLevel: {					
					starts: "",
					xmoney: "",
					type: "1"
				},
				//关于输入权限
				rules: {},
				input: "",
				tableData: []
			},
			mounted() {
				this.select();
			},
			methods: {
				delect(sid) {
						//alert(sid)
						let _this = this;
						axios.get(`http://127.0.0.1:8080/DZWWeb/ljy/api/LjyAction/delect/${sid}`).then(function(resp) {
							//测试是否查到数据
							//alert(resp);
							this.select();
						});
						this.$message({
							message: '删除成功！',
							type: 'success'
						});
						_this.select();
					},
					select() {
						let _this = this;
						axios.get(`http://127.0.0.1:8080/DZWWeb/ljy/api/LjyAction/SelectAll`).then(function(resp) {
							//测试是否查到数据
							//alert(resp);							
							_this.tableData = resp.data;
							console.log(_this.tableData);
						});
					},
					handleClose(done) {
						this.$confirm('确认关闭？')
							.then(_ => {
								done();
							})
							.catch(_ => {});
					},
					ensure() {
						let _this = this;
						axios.post(`http://127.0.0.1:8080/DZWWeb/ljy/api/LjyAction/insert`, this.addJGLevel).then(resp => {
							if (resp.data.code == "200") {
								this.$message({
									message: "新增技工等级成功",
									type: 'success'
								});
								_this.select();
							}
						})
					},
					resetForm(formName) {
						this.$refs[formName].resetFields();
					}
			}
		})
	</script>

</html>